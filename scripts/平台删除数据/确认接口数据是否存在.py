import time

import requests

# ids = (457395, 578226, 578238, 587870, 587869, 587857, 587855, 457395, 457058, 456477, 456980, 457050, 457296, 457083, 456557, 457084, 15132989, 457182, 457128, 457681, 15484546, 457081, 457329, 457241, 457020, 456513, 457718, 13644505, 13996681, 14395037, 15134188, 14203315, 14203311, 14203318, 14203314, 14203313, 14203312, 14203317, 457812, 457838, 457244, 457596, 456775, 456755, 457346, 457202, 456929, 457040, 457261, 457014, 457385, 458086, 457173, 456687, 456844, 457008, 456869, 457833, 457072, 456893, 457769, 458157, 457283, 456456, 457104, 456767, 456680, 457257, 457863, 457520, 572617, 458027, 456548, 457399, 457971, 457599, 456599, 457495, 456945, 458047, 456925, 457821, 457358, 457340, 457418, 456826, 456553, 456640, 457464, 457749, 456578, 457494, 572615, 572612, 457313, 456500, 457498, 456579, 456453, 456733, 457880, 457263, 456873, 457693, 457810, 457187, 457634, 456550, 457479, 457792, 457441, 457720, 457119, 457997, 457188, 457016, 457823, 457690, 456924, 456581, 457195, 456714, 457858, 456621, 458023, 456730, 457648, 456737, 457744, 457612, 456974, 572614, 456633, 457881, 456752, 457654, 457034, 457677, 457831, 456756, 456726, 457471, 457708, 457663, 456521, 457914, 457186, 457511, 457561, 457056, 457033, 457467, 456831, 457847, 456746, 457913, 458146, 456913, 457497, 458131, 457169, 456906, 572613, 457658, 456452, 13022510, 13022499, 13022515, 13022511, 13022491, 13022494, 13022496, 13022504, 13022507, 13022509, 13022495, 13022502, 13022500, 13022497, 13022492, 13022489, 13022493, 13022514, 13022490, 13022513, 13022512, 13022506, 13022498, 13022508, 13022505, 13022501, 13022503, 13022488, 457057, 457700, 457857, 456638, 457591, 457147, 457439, 456950, 457198, 457244, 457395, 457395, 457838, 457244, 457596, 456775, 456755, 457346, 457202, 456929, 457040, 457261, 457014, 457385, 458086, 457173, 456687, 456844, 457008, 456869, 457833, 457072, 456893, 457769, 458157, 457283, 456456, 457104, 456767, 456680, 457257, 457863, 457520, 572617, 458027, 456548, 457399, 457971, 457599, 456599, 457495, 456945, 458047, 456925, 457821, 457358, 457340, 457418, 456826, 456553, 456640, 457464, 457749, 456578, 457494, 572615, 572612, 457313, 456500, 457498, 456579, 456453, 456733, 457880, 457263, 456873, 457693, 457810, 457395, 457395, 457395, 457395, 457395, 457425, 457395, 457395, 457395, 457395, 457525, 457838, 457838, 457395, 458065, 457395, 457395, 457838, 12495444, 456899, 456899, 457368, 457198, 457190, 457039, 456823, 457368, 456862, 457397, 457397, 456450, 578055, 578280, 12259137, 457010, 457275, 457525, 456994, 456872, 12222210, 457395, 457525, 578055, 457421, 457395, 457395, 457395, 457395, 457395, 456477, 456980, 457050, 457296, 457083, 456557, 457084, 15132989, 457182, 457128, 457681, 15484546, 457081, 457329, 457241, 457020, 456513, 457718, 13644505, 13996681)
ids = [9, 10, 11, 13, 14, 15, 16, 20, 21, 22, 23, 25, 31, 33, 37, 38, 39, 40, 41, 45, 50, 53, 56, 57, 58, 60, 63, 67, 70, 71, 72, 74, 90, 92, 96, 100]

model = 'OrgDepartment'


get_url = "https://cstx.hcmcloud.cn/api/hcm.model.get"

edit_url = "http://113.207.106.112:18080/api/hcm.model.edit"

def check_model_id_exist(model, id_):
    response = requests.post(get_url, json={"model": model, "id_": id_}, headers={"Authorization": "Bearer hcmdcb295f85aef7c7c9fd080e8b132e46d1f029f84"})
    try:
        assert response.json().get('result').get("id")
    except:
        print(response.json())
        print(f'id({id_}) not exist')

def check(model_, ids):
    for id_ in ids:
        check_model_id_exist(model, id_)
        time.sleep(1)

def bulk_edit(model_, infos):
    for index, id_ in enumerate(ids):
        response = requests.post(edit_url, json={"model": model_,
         "id_": id_, "info": {"third_sign": infos[index]}}, 
         headers={"Authorization": "Bearer hcm3f3b531cb4f1ec124083703e84eb048d26a5e643"})



if __name__ == "__main__":
    bulk_edit("SyncTempData", [15262514, 15437297, 15437299, 15437303, 15437305, 15437307, 15437309, 15437283, 15437311, 15437313, 15437315, 15437285, 15437317, 15437287, 15437319, 15437321, 15437323, 15437325, 15437327, 15437329, 15437289, 15437331, 15437333, 15437335, 15437337, 15437339, 15437291, 15437341, 15437343, 15437345, 15437347, 15437293, 15437351, 15437295, 15437353, 15437355])