已解决：

1. 部门需要按照顺序同步
2. 钉钉自建字段同步


还未解决的问题
# 
3. 处理目前平台存在的脏数据，主要是平台这边判断新增成功，而第三方没有这条数据


4. 需要用户控制 定时任务执行顺序

组织 > 人员

逻辑执行顺序， 新增 -> 同步 -> 删除， 

组织数据插入和删除顺序 
插入和更新， 先根后叶子
删除先叶子后根

部门插入-> 部门更新 -> 人员插入 -> 人员更新 -> 人员删除 -> 部门删除 


解决方案
2. 钉钉自建字段， 对照文档，构建合适数据结构  低风险


3. 修改同步逻辑， 如果同步尝试失败， 则采用新增方式发起请求 高风险  #

4. 整合同步操作，配置融合 中风险



代码存在大量漏洞

1. 新增一条数据，中间表写入，但是还未执行同步，然后修改这条数据，数据找不到第三方id执行不了同步
2. 部门同步，新增多个部门，存在父子关系， 存储在第三方表中的数据也是没有第三方id，所以也执行不了同步

3. 由于支持指定部门同步， 部门id和人员id，在创建同步数据时已经指定了根部门，根部门存储的是department_id

该根部门
4. sync_info 指定的depart_id 是 department_id, 然后钉钉数据同步的时候指定 的是department_history去同步， 这个id不对应


